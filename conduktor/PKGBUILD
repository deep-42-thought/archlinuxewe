# Maintainer: Erich Eckner <arch at eckner dot net>
# Contributor: Lucas Declercq <lucas dot declercq at mailbox dot org>

pkgname="conduktor"
pkgver=2.21.5
pkgrel=1
pkgdesc="A Kafka Desktop Client"
url="https://www.conduktor.io"
license=("Commercial")
arch=("any")
depends=("bash")
optdepends=("java-runtime>=11: at least Java 11")
source=("https://github.com/conduktor/builds/releases/download/v${pkgver}/Conduktor-linux-${pkgver}.zip"
        "conduktor.desktop")
sha512sums=('c7c086c286fb4f9b6a03036b5833d4a1bb6cb076c8747ea8dc2fa5e963e113086eff3914035eee1f442c707b976636e06bb12791f0bb9cac2a715993b1db3820'
            '343679f6d5bb2dbfa7d573e68e703c1c99af58200388e0199b67305b3e7e54a29a6fb230dced51411e33570fc47729449b22fc60e600c4a6216017dc06eb6a06')
options=("!strip")

package(){
    install -Dm755 -t "${pkgdir}/opt/${pkgname}/bin/" "${srcdir}/conduktor-${pkgver}/bin/${pkgname}"
    install -Dm644 -t "${pkgdir}/opt/${pkgname}/lib/" "${srcdir}/conduktor-${pkgver}"/lib/*.jar
    install -Dm644 -t "${pkgdir}/usr/share/applications/" "${srcdir}/"*.desktop

    mkdir -p "${pkgdir}/usr/bin"

    ln -s "/opt/${pkgname}/bin/${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
}
