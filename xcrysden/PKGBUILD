# Maintainer: Erich Eckner <arch at eckner dot net>
# Contributor: Adrian HÃ¼hn <adrian.huehn@web.de>
# Previous Maintainer: Vit <vitruss@gmail.com>

pkgname=xcrysden
pkgver=1.6.2
pkgrel=1
epoch=
pkgdesc="crystalline and molecular structure visualisation program"
arch=('i686' 'pentium4' 'x86_64')
url="http://www.xcrysden.org/"
license=('GPL2')
depends=('tk' 'tcl' 'tk-togl' 'gl2ps' 'fftw' 'bwidget' 'imagemagick' 'gcc-fortran' 'glu' 'libxmu')
replaces=('xcrysden-bin')
source=("http://www.xcrysden.org/download/xcrysden-${pkgver}.tar.gz"
        "fix-xcrysden-install.patch"
	"Make.sys")
sha512sums=('43e65e421be70528b4f979eefe03abbf0b4c2177bae51fa71247ca70ecc3dfbd36a793e99c2ee9b50fea31f37f4060b44c662f222f5bc31d3f1dc96d51273b19'
            '17981ae72fc1b1d36388830c49ebc5d5d6916ee56c06b3fd3132edbe21a880d39bd85903183a4270b494e510e2c76d9276660ffeed92d6cc34abf33c3b2ae0ff'
            '2ed95be6a775cdca1a61634948065ebc2ce2ecd305b30140b8a04b1785c0546344f511755510a9e6634afb6ff0aaa82f02565682d62cf6657f3b8039d37a7453')

prepare() {
	mv Make.sys "$pkgname-$pkgver"
	cd "$pkgname-$pkgver"
	patch -p1 -i $srcdir/fix-xcrysden-install.patch
}

build() {
	cd "$pkgname-$pkgver"
	make xcrysden
}

package() {
	cd "$pkgname-$pkgver"
	prefix=$pkgdir/usr make install
}
