# Maintainer: Erich Eckner <arch at eckner dot net>
pkgname=xraylarch
pkgver=0.9.37
pkgrel=1
pkgdesc="Data Analysis Tools for X-ray Spectroscopy"
arch=('i686' 'x86_64')
url="http://xraypy.github.io/xraylarch/"
license=('BSD')
groups=()
depends=(
  'python2'
  'python2-asteval>=0.9.12'
  'python2-backports.functools_lru_cache'
  'python2-h5py>=2.2'
  'python2-lmfit>=0.9.9'
  'python2-matplotlib>=1.5.1'
  'python2-numpy>=1.7'
  'python2-peakutils>=1.0.0'
  'python2-pillow>=3.4'
  'python2-psutil'
  'python2-requests>=2.1'
  'python2-scipy>=0.17'
  'python2-six>=1.10'
  'python2-sqlalchemy>=0.9'
  'python2-termcolor'
  'python2-wxutils'
  'python2-wxmplot'
  'wxpython'
)
makedepends=()
checkdepends=()
optdepends=(
  'python2-CifFile:        needed for xrd modules'
  'python2-epics:          needed for using the EPICS control system'
  'python2-fabio:          needed for xrd modules'
  'python2-nose:           needed for testing tools'
  'python2-pyFAI:          needed for xrd modules'
  'python2-xrayutilities:  needed for xrd modules'
  'python2-yaml:           needed for graphics and plotting'
)
provides=()
conflicts=()
replaces=()
backup=()
options=()
source=(
    "${pkgname}-${pkgver}.tar.gz::https://github.com/xraypy/${pkgname}/archive/${pkgver}.tar.gz"
)
sha512sums=('a32bddfef459b9a61b28e31fff774e7db1b7cacd50414d9cfbfedfd8da0207da8b049e244620f19594312d8cf871002d8730236adfda12b7feac5b5d38203494')

build() {

    cd ${pkgname}-${pkgver}
#    sed "s|DEBUG = False|DEBUG = True|" -i setup.py
    python2 setup.py build

}

package() {

    cd ${pkgname}-${pkgver}
    python2 setup.py install --skip-build --root="${pkgdir}" --prefix=/usr
    sed "s| python\$| python2|" -i $pkgdir/usr/bin/*

}
