# Maintainer: Erich Eckner <arch at eckner dot net>
pkgname=dd-resume
pkgver=0.0
pkgrel=1
pkgdesc='resumably copy with dd via network'
arch=('any')
url="https://git.eckner.net/Erich/${pkgname}"
license=('GPL')
depends=()
makedepends=('help2man')
source=(
    "https://git.eckner.net/Erich/${pkgname}/snapshot/${pkgname}-${pkgver}.tar.xz"
)
sha512sums=('9daae6bbea7ba9801eac1cefca656715ea100b52dcc65c36c7b9ffad11cc116a5468ea8e0fa4ed746981876ffca4da3f7b89598e983f2dd4b8b79ed369f11925')

build() {

    cd ${pkgname}-${pkgver}
    make

}

package() {

    cd ${pkgname}-${pkgver}
    depends+=(
      $(
        ./${pkgname} --required | \
          xargs -rn1 which | \
          xargs -rn1 pacman -Qqo
      )
    )
    make DESTDIR=${pkgdir} install

}
