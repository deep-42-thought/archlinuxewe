# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2019.07.04.09.49.15
pkgrel=1
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2019-07-04T07:45:48.arch.eckner.net.cert.pem'
  'https://eckner.net/certs/2019-07-04T09:49:15.arch.eckner.net.cert.pem.new'
)
sha512sums=(
  'f47a38879c346c487a9d53640e681e2600362d9e37d8463282e5f2ed3d02c0fbe60e5e48582335d18b0fb6e76b42544b7e8aa3cf40d796c9ae733ad44dd5bc42'
  'd8de0d8d71f132d4a9c9afd0e226092e7381f42b5e915c192d64017bbf8c2124143e05760de1c56a09ed35ca59da2985fa0cb92c7f500d79dd6fe7c1f1256a11'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *.cert.pem{,.new}; do
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
