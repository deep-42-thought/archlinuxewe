# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2019.09.02.14.00.51
pkgrel=2
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2019-09-02T13:57:39.root-ca.crt.old'
  'https://eckner.net/certs/2019-09-02T14:00:51.root-ca.crt'
)
sha512sums=(
  'b11d002ce41abd456fe6cfd839eb11f1ee2eb45196fa716e4883e57a7d4a43f5a58b0305df3def2f6663f85be6d8450679d2c79e0cbc633c543341e6d4558088'
  '3e4e99ab15fb47180c665cad3c794a3e304ef20ab31e6846cd6272a6e1fcd5a86176f24ce95f60d7502c639e7f6efcef5e35bb5e37e5a77632ac1a62a06d11a5'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *.cert.pem{,.new} *.crt{,.new}; do
    [ -f "$s" ] || continue
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
