# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2019.12.09.10.30.07
pkgrel=1
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2019-12-09T10:25:02.root-ca.old.crt'
  'https://eckner.net/certs/2019-12-09T10:30:07.root-ca.crt'
)
sha512sums=(
  '2cb8961553e664faa1015182b466b24814645b25138e50f1e7362dfee756066f472f1f699764015e79e56e46ab93807dc2ce01374e639962574fd072b468a9a6'
  '8391b8219c111b0f2128f6620161bcd76fe5ddd5a609bb8371646dc40ada8c1c0084fc692472cf9b3e2fde36d48404104596ff3ebef50ab6c2eec267a1faf054'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *{,.old}.cert.pem *{,.old}.crt; do
    [ -f "$s" ] || continue
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
