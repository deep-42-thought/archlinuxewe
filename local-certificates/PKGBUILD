# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2019.07.30.09.32.07
pkgrel=1
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2019-07-04T07:45:48.arch.eckner.net.cert.pem'
  'https://eckner.net/certs/2019-07-04T09:49:15.arch.eckner.net.cert.pem.new'
  'https://eckner.net/certs/2019-07-27T08:33:41.backup-lo.ddns.eckner.net.cert.pem'
  'https://eckner.net/certs/2019-07-27T08:34:32.backup-lo.ddns.eckner.net.cert.pem.new'
  'https://eckner.net/certs/2019-07-30T09:29:05.fileserver-lo.ddns.eckner.net.cert.pem'
  'https://eckner.net/certs/2019-07-30T09:32:07.fileserver-lo.ddns.eckner.net.cert.pem.new'
)
sha512sums=(
  'f47a38879c346c487a9d53640e681e2600362d9e37d8463282e5f2ed3d02c0fbe60e5e48582335d18b0fb6e76b42544b7e8aa3cf40d796c9ae733ad44dd5bc42'
  'd8de0d8d71f132d4a9c9afd0e226092e7381f42b5e915c192d64017bbf8c2124143e05760de1c56a09ed35ca59da2985fa0cb92c7f500d79dd6fe7c1f1256a11'
  'e69b4fb3caa45c4d214d4083bc235ad31f4125a6bf6ded4041160c371d20889c5067550f4acdd066a1dc68b2fc859084e9197bdedcae1aa29c74aedbe933ac5a'
  'c99bcf732b5110c1137d2d1bf938e50f332b49b63c36f957dd2a6b51e224a7dfba6a5c096d0e9a67149318094405deb773677cfa2bccfa806d72c6c17e8aaa63'
  'cf8617da05d72e20c766d8a68cae3ef7f4ee47f9660912f61557c54df414b7b7a495c5b852afc14775698ea11cbc57ec19a78c6a2948547fe2aff0df271802be'
  '87cf81fe24916c0899b0adc49cea5129447a538310d06e425daa3e58d56acb5aac185804f7e53fff28ecb4e6cd6d599f64d00e831f35578a673dddc77eb17fb3'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *.cert.pem{,.new}; do
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
