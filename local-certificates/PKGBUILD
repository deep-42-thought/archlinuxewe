# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2019.12.06.15.22.27
pkgrel=1
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2019-12-01T14:04:18.root-ca.crt.old'
  'https://eckner.net/certs/2019-12-06T15:22:27.root-ca.crt'
)
sha512sums=(
  'f0e11498462a4d0179f17d4fcd6d7b9cc181c6ea11f7fd7b23ed31349b7189dcc0e4bcce070cfcc1ac53d905c054086cb60f52d7c9f9e159f50ea0cedc61831f'
  'f50404fc7351b5f376ca5f085b99f60cdf8caba7ad10b150ef2690064446ed0f7718ab228642fdaabb270a94ad234320a73b3731a77c4fc886e2ed4a7f3bd743'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *.cert.pem{,.new} *.crt{,.new}; do
    [ -f "$s" ] || continue
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
