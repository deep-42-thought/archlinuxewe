# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2020.01.13.14.36.50
pkgrel=1
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2020-01-13T14:36:02.root-ca.old.crt'
  'https://eckner.net/certs/2020-01-13T14:36:50.root-ca.crt'
)
sha512sums=(
  '9c4e253faa4ff15e6e0f6ef7e9856c261506b835b253a011bda3bea6b785f7a8605f2b03056a4a7b1a2435b9ae134164a38c7e0919ee31035f1adf4d8ddfbaf2'
  'cc33ad5a3520d41f05e84eefc23f7e8283c14d812a726132ac77c469e3f3e7e5ee9435221a1937a4653efc6c9adf3a0a97ecfc2c620f2fce8fb7dcf1f7379e34'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *{,.old}.cert.pem *{,.old}.crt; do
    [ -f "$s" ] || continue
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
