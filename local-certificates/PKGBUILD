# Maintainer: Erich Eckner <arch at eckner dot net>

pkgname='local-certificates'
arch=('any')
pkgver=2019.12.09.09.05.26
pkgrel=1
pkgdesc='Certificate for local version of https://arch.eckner.net'
license=('GPL')
install='local-certificates.install'
url='https://eckner.net/certs'

source=(
  'https://eckner.net/certs/2019-12-06T15:22:27.root-ca.crt.old'
  'https://eckner.net/certs/2019-12-09T09:05:26.root-ca.crt'
)
sha512sums=(
  'f50404fc7351b5f376ca5f085b99f60cdf8caba7ad10b150ef2690064446ed0f7718ab228642fdaabb270a94ad234320a73b3731a77c4fc886e2ed4a7f3bd743'
  '8566b02cb83a665f75f275ddfb66269050c7fe3daded941b94b7d12c288594991f869f8ae9340a3988f9e3547604667d5b9abe36e5f23ccbb328b00715a6acdd'
)

package() {
  cd "${srcdir}"
  install -d "${pkgdir}/usr/share/ca-certificates/trust-source/anchors"
  for s in *.cert.pem{,.new} *.crt{,.new}; do
    [ -f "$s" ] || continue
    install \
      "${s}" \
      "${pkgdir}/usr/share/ca-certificates/trust-source/anchors/${s#????-??-??T??:??:??.}"
  done
}
